(()=>{var e={199:(e,o,r)=>{const t=r(245);e.exports=function(e,o){return{username:e,text:o,time:t().format("h:mm a")}}},219:e=>{const o=[];e.exports={userJoin:function(e,r,t){const s={id:e,username:r,room:t};return o.push(s),s},getCurrentUser:function(e){return o.find((o=>o.id===e))},userLeave:function(e){const r=o.findIndex((o=>o.id===e));if(-1!==r)return o.splice(r,1)[0]},getRoomUsers:function(e){return o.filter((o=>o.room===e))}}},860:e=>{"use strict";e.exports=require("express")},245:e=>{"use strict";e.exports=require("moment")},952:e=>{"use strict";e.exports=require("socket.io")},685:e=>{"use strict";e.exports=require("http")},17:e=>{"use strict";e.exports=require("path")}},o={};function r(t){var s=o[t];if(void 0!==s)return s.exports;var n=o[t]={exports:{}};return e[t](n,n.exports,r),n.exports}(()=>{const e=r(17),o=r(685),t=r(860),s=r(952),n=r(199),{userJoin:i,getCurrentUser:m,userLeave:u,getRoomUsers:c}=r(219),a=t(),p=o.createServer(a),d=s(p);a.use(t.static(e.join(__dirname,"public")));const x="Chat Bot";d.on("connection",(e=>{e.on("joinRoom",(({username:o,room:r})=>{const t=i(e.id,o,r),s=r;e.join(t.room),e.emit("message",n(x,`Welcome to ${s} Room`)),e.broadcast.to(t.room).emit("message",n(x,`${t.username} has joined the chat`)),d.to(t.room).emit("roomUsers",{room:t.room,users:c(t.room)})})),e.on("chatMessage",(o=>{const r=m(e.id);d.to(r.room).emit("message",n(r.username,o))})),e.on("disconnect",(()=>{const o=u(e.id);o&&(d.to(o.room).emit("message",n(x,`${o.username} has left the chat`)),d.to(o.room).emit("roomUsers",{room:o.room,users:c(o.room)}))}))}));const f=process.env.PORT||3e3;p.listen(f,(()=>console.log(`Server running on port ${f}`)))})()})();
//# sourceMappingURL=index.js.map